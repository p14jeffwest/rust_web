
> Rust로 어떻게 웹 사이트를 만드는 가에만 관심이 있다면, 아랫부분은 가볍게 읽거나 건너뛰어도 됩니다. 한자를 한글로 바꿀 때 어떻게 할지에 대한 내용입니다. 

------

한자를 한글로 변환하는 기본 아이디어는 다음과 같다. 

1. `한자, 한글`로 된 변환 사전을 만든다. 즉, [家, 가]와 같이 한자와 그 한자에 대한 한글로 된 사전 파일을 만든다.   
2. 위 1번에 의한 변환에 해당하지 않는 규칙으로 `두음법칙`이 있다. 즉, `女子`는 `려자`가 아니고 `여자`로 발음해야 한다. 이러한 두음법칙에 해당하는 한자에 대한 사전을 따로 만든다.  
3. 위 두 가지 사전으로도 해결이 되지 않는 불규칙한 발음들이 있다. 예를 들어 `六月`은 `육월`이 아니고 `유월`이라고 해야 한다. 이러한 불규칙한 발음이 되는 것을 별도의 사전으로 만든다.  

## 1. 한자-한글 기본 변환 사전 만들기   

`한자-한글`로 된 사전을 어떻게 얻을까가 좀 고민이었다. 공개된 것이 있는가도 좀 찾아봤는데, 마땅한 게 없었는데, 문득 엑셀에 한자 변환 기능이 있는 것이 생각나서, 엑셀에서 만들기로 했다. 

엑셀에 있는 두 가지 기능을 이용하면 `한자-한글` 사전을 만들 수 있다. 

* `CHAR(code)` 함수는 code에 해당하는 문자를 표출한다. 한자에 해당하는 code 번호를 쭈욱 적고 `CHAR`함수를 이용하면 `한자` 집합을 만들 수 있다.  
* 엑셀 기능 중에 `한글/한자변환`이란 것이 있어서, 이 기능을 이용하면 엑셀 시트에 있는 한자 하나하나에 대해서 한글로 바꿀 수 있다. 

#### 한자 집합 만들기

`한자`에 해당하는 유니코드는 아래 범위에 있다. 

* 13312 ~ 19893: 6,582개  
* 19968 ~ 40869: 20,902개  
* 63744 ~ 64045: 302개  
* 64048 ~ 64109: 62개

총 27,848개이다. 

1) 엑셀을 열어서, A 열에 위 범위의 숫자를 입력한다.  

<img src="https://wikidocs.net/images/page/280947/5.png" width=200 >

2) 열 B에 `UNICAHAR(A1)`을 입력해서, 열 A에 있는 코드에 대한 문자가 나오게 한다. 그 밑에 있는 코드 번호에 대해서도 문자로 변환되게 한다. 

<img src="https://wikidocs.net/images/page/280947/6.png" width=300 >
<br><br>
<img src="https://wikidocs.net/images/page/280947/7.png" width=200 >

3) 열 C에는 열 B에 있는 한자를 '값으로 붙여넣기'한다.  

4) `한글/한자 변환` 메뉴를 리본 메뉴에 추가한다. 

        * 엑셀 좌상단에 있는 `빠른실행도구`메뉴에서 마우스 우클릭하고 `빠른 실행 도구 모음 사용자 지정`을 누른다.  
        * '명령 선택'에서 `모든 명령`을 선택하고, `한글/한자 변환`을 추가하고, '확인'을 누른다.  

<img src="https://wikidocs.net/images/page/280947/8.png" width=400 >

<img src="https://wikidocs.net/images/page/280947/9.png" width=600 >

5) C 열에 있는 모든 한자를 선택하고, 위에서 추가한 '한글/한자 변환' 아이콘을 눌러서 변환을 시킨다. --> 변환 상자가 나오면 `Alt-C`를 계속 누르고 있으면 된다. 

6) 위 5번까지 작성된 시트를 hanja_char.csv로 저장하자.  

> 위와 같이 직접 csv 파일을 만들어도 되고, 간편하게 하려면 hanja_char.csv의 내용이 이 글의 다음 페이지에 있으니, 모든 내용을 텍스트 에디터에 옮긴 후 hanja_char.csv를 만들어도 됩니다.   
> 혹은, [github에 올려져 있는 파일을](https://github.com/p14jeffwest/hanja_hangul/blob/main/hanja_char.csv) 다운로드해도 됩니다.   


## 2. 두음법칙 사전 만들기 

두음법칙은 '녀, 뇨, 뉴.니'가 단어 첫머리에 올 때 '여,요,유,이'로 발음이 바뀌는 것을 말한다. 예를 들어 '女子'를 그대로 음으로 나타내면 '녀자'이겠으나 '여자'로 표기해야 한다.  
따라서, 한자 단어를 한글로 변환했을 때 위 두음법칙에 해당하는 경우는 단어의 첫 글자를 두음법칙에 맞게 변환해야 한다. 

이러한 두음법칙이 일어날 수 있는 글자는 모두 52개이다. 단어의 첫 글자로 이 문자로 변환되는 경우에 대해, 두음법칙을 적용해서 변환하면 되겠다. 

```
냑,약
냥,양
녀,여
녁,역
력,역
년,연
녈,열
념,염
녕,영
녜,예
뇨,요
뉴,유
뉵,육
니,이
라,나
락,낙
란,난
랄,날
람,남
랍,납
랑,낭
래,내
랭,냉
략,약
량,양
려,여
련,연
렬,열
렴,염
렵,엽
령,영
례,예
로,노
록,녹
론,논
롱,농
뢰,뇌
료,요
룡,용
루,누
류,유
륙,육
륜,윤
률,율
륭,융
륵,늑
름,늠
릉,능
리,이
린,인
림,임
립,입

```

> dueum.csv 파일은 위 텍스트를 이용해서 텍스트 에디터에서 별도로 만들 수도 있고, [github에 올려져 있는 파일을](https://github.com/p14jeffwest/hanja_hangul/blob/main/dueum.csv) 다운로드 받아도 됩니다.  


## 3. 불규칙 사전 만들기 

2번에서 얘기한 두음법칙 외에도 1번에 의한 변환으로는 제대로 변환이 안 되는 경우가 있다. 불규칙 변환이다. 

#### '사이시옷' 변환  

사이시옷 변환은 순수 우리말이거나 우리말이 포함된 한자어의 경우에만 이루어지는 것이 기본이지만, [곳간, 셋방, 숫자, 찻간, 툇간, 횟수] 이렇게 6개의 순수 한자어에 대해서는 사이시옷을 붙이게 되어 있다. 

따라서, 한자어 `庫間`은 `고간`이 아니라 `곳간`으로 변환되어야 한다. 

#### 동자이음 변환

`동자이음`란 글자는 같으나 읽히는 음이 여러 개인 글자를 말한다. 즉, 동일한 글자인데 단어에 따라서 다르게 읽히는 글자이다. 예를 들어, `車`라는 한자는 `客車`일 때는 `객차`라고 읽히고, `人力車`일 때는 `인력거`로 읽힌다. 즉, `車`라는 같은 한자인데 `차`로도 읽힐 때가 있고 `거`라고 읽힐 때가 있다. 

이러한 `동자이음`에 해당하는 단어 중에, 위 1번에서의 변환에 의한 음이 아니고 다른 음으로 표기해야 하는 경우는, 별도로 사전을 만들어서 처리해야 한다. 

이러한 불규칙 변환되는 단어를 모아 놓은 것이 아래 단어들이다. 

```
客車,객차
車庫,차고
金氏,김씨
大保,태보
大僕,태복
度支,탁지
豫度,예탁
句讀,구두
吏讀,이두
洞達,통달
洞察,통찰
洞燭,통촉
尙父,상보
尼父,이보
古公亶父,고공단보
敗北,패배
疏數,소삭
煩數,번삭
數罟,촉고
簞食,단사
樂山樂水,요산요수
阿干,아한
鹽干,염한
更張,경장
變更,변경
白乾蠶,백간잠
見齒,현치
謁見,알현
朝見,조현
魋結,추계
椎結,추계
契丹,글안
出必告,출필곡
吐谷渾,토욕혼
龜鑑,귀감
龜裂,균열
茶道,다도
茶房,다방
單于,선우
跳驅,조구
跳騰,조등
魚跳,어조
皐陶,고요
家隸,가예
奴隸,노예
僕隸,복예
袒免,단문
冒頓,묵돌
覆育,부육
覆翼,부익
伏鷄,부계
復活,부활
復興,부흥
否塞,비색
否運,비운
寺正,시정
九寺,구시
檢索,검색
思索,사색
減殺,감쇄
惱殺,뇌쇄
相殺,상쇄
殺到,쇄도
告訴狀,고소장
年賀狀,연하장
賞狀,상장
拔本塞源,발본색원
閉塞,폐색
遊說,유세
悅樂,열락
說樂,열락
輕率,경솔
率先,솔선
率直,솔직
斬衰,참최
帥師,솔사
師先,솔선
星宿,성수
辰宿,진수
標識,표지
月氏,월지
憎惡,증오
嫌惡,혐오
般若,반야
嗚呼,오호
於呼,오호
簡易,간이
容易,용이
迦葉,가섭
刺殺,척살
著押,착압
着押,착압
忽諸,홀저
居諸,거저
生辰,생신
誕辰,탄신
星辰,성신
徵調,치조
宮商角徵羽,궁상각치우
參差,참치
差備,채비
拓本,탁본
推敲,퇴고
三惡趣,삼악추
不然則,불연즉
必死則生,필사즉생
幸生則死,행생즉사
遍知,변지
布施,보시
狂暴,광포
橫暴,횡포
降伏,항복
降服,항복
投降,투항
喝食,할식
喝參,할참
喝火,할화
賈船,고선
商賈,상고
初八日,초파일
六月,유월
十月,시월
木瓜,모과
困難,곤란
乖愎,괴팍
娑婆,사바
邯鄲之夢,한단지몽
唵川面,옴천면
紙杻驛,지축역
庫間,곳간
貰房,셋방
數字,숫자
車間,찻간
退間,툇간
回數,횟수 

```


> 이 파일은 [github의 여기에서도](https://github.com/p14jeffwest/hanja_hangul/blob/main/hanja_word.csv) 받을 수 있다.  

> 웹 페이지와 사전을 뒤져서 나올만한 모든 불규칙 단어를 나열했다고 생각하긴 하는데, 누락된 것이 있을 수도 있다. 이 경우는 이 hanja_word.csv파일에 추가하면 된다. 